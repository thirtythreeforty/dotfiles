#!/bin/bash

# A simple script to rebuild YCM against system libraries when they are
# updated.  (This happens a lot with Arch.)
pushd ~/.vim/bundle/YouCompleteMe >/dev/null 2>&1

is_installed() {
	command -v $1 >/dev/null 2>&1
}

params=""

if(is_installed clang); then
	echo "C/C++ support detected"
	params="$params --clang-completer --system-boost --system-libclang"
fi

if(is_installed go); then
	echo "Go support detected"
	params="$params --gocode-completer"
fi

if(is_installed xbuild); then
	echo "C# support detected"
	params="$params --omnisharp-completer"
fi

if(is_installed cargo); then
	echo "Rust support detected"
	params="$params --racer-completer"
fi

if(is_installed npm); then
	echo "JavaScript support detected"
	params="$params --tern-completer"
fi

echo "All flags detected: \`"$params"\`"

python2 install.py $params

popd >/dev/null 2>&1
